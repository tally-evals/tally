---
title: Data
description: Loaders, validators, and adapters for datasets and conversations.
---

import { TypeTable } from 'fumadocs-ui/components/type-table';

# Data

Utilities in `tally/data` help load and validate dataset/conversation shapes.

## Import

```ts
import {
  loadDatasetFromJSONL,
  loadConversationsFromJSONL,
  loadFromJSONL,
  loadConversationStepsFromJSONL,
  isValidDatasetItem,
  isValidConversation,
  isValidConversationStep,
  isValidDataset,
  isValidConversations,
  assertDatasetItem,
  assertConversation,
  assertDataset,
  assertConversations,
  adaptToDatasetItem,
  adaptToDataset,
  adaptToConversationStep,
  adaptToConversation,
  adaptToConversations,
} from 'tally/data';
import type { JSONLLoadOptions, ShapeAdapterOptions } from 'tally/data';
```

## JSONL loaders

```ts
loadDatasetFromJSONL(path: string, options?: JSONLLoadOptions): Promise<DatasetItem[]>
loadConversationsFromJSONL(path: string, options?: JSONLLoadOptions): Promise<Conversation[]>
loadConversationStepsFromJSONL(path: string, options?: JSONLLoadOptions): Promise<ConversationStep[]>
loadFromJSONL<T extends 'dataset' | 'conversation'>(path: string, type: T, options?: JSONLLoadOptions): Promise<T extends 'dataset' ? DatasetItem[] : Conversation[]>
```

## Validation

```ts
isValidDatasetItem(value: unknown): value is DatasetItem
isValidConversationStep(value: unknown): value is ConversationStep
isValidConversation(value: unknown): value is Conversation
isValidDataset(value: unknown): value is DatasetItem[]
isValidConversations(value: unknown): value is Conversation[]
```

```ts
assertDatasetItem(value: unknown, message?: string): asserts value is DatasetItem
assertConversation(value: unknown, message?: string): asserts value is Conversation
assertDataset(value: unknown, message?: string): asserts value is DatasetItem[]
assertConversations(value: unknown, message?: string): asserts value is Conversation[]
```

## Shape adapters

```ts
adaptToDatasetItem<T>(value: T, options?: ShapeAdapterOptions): DatasetItem
adaptToDataset<T>(value: readonly T[], options?: ShapeAdapterOptions): DatasetItem[]
adaptToConversationStep<T>(value: T, options?: ShapeAdapterOptions): ConversationStep
adaptToConversation<T>(value: readonly T[], options?: ShapeAdapterOptions): Conversation
adaptToConversations<T>(value: readonly T[], options?: ShapeAdapterOptions): Conversation[]
```

<TypeTable
  type={{
    JSONLLoadOptions: {
      description: 'Options for JSONL loaders (validation, transforms, adapters).',
      type: 'type',
      required: true,
    },
    ShapeAdapterOptions: {
      description: 'Options for adapting raw objects into Tally shapes.',
      type: 'type',
      required: true,
    },
  }}
/>

