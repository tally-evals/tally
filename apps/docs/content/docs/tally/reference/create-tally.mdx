---
title: createTally
description: Create a Tally container and run evaluations.
---

import { PropertyTable } from '@/components/PropertyTable';

# `createTally()`

Create a Tally container for running evaluations.

## Import

```ts
import { createTally, createEvaluator, TallyContainer } from 'tally';
```

### `createEvaluator()`

<PropertyTable
  content={[
    { name: 'name', type: 'string', description: 'Evaluator name.' },
    {
      name: 'evals',
      type: 'readonly Eval[]',
      description: 'List of eval definitions.',
    },
    {
      name: 'context',
      type: 'EvaluationContext',
      description: 'Execution context (required).',
      properties: [
        {
          type: 'EvaluationContext',
          parameters: [
            {
              name: 'singleTurn',
              type: 'SingleTurnRunPolicy',
              description: 'Single-turn run policy.',
              isOptional: true,
            },
            {
              name: 'metadata',
              type: 'Record<string, unknown>',
              description: 'Optional metadata for this run.',
              isOptional: true,
            },
          ],
        },
      ],
    },
    {
      name: 'description',
      type: 'string',
      description: 'Optional description for the evaluator.',
      isOptional: true,
    },
    {
      name: 'metadata',
      type: 'Record<string, unknown>',
      description: 'Optional metadata for the evaluator.',
      isOptional: true,
    },
  ]}
/>

### `createTally()`

<PropertyTable
  content={[
    {
      name: 'data',
      type: 'readonly TContainer[]',
      description: 'Data containers to evaluate.',
    },
    {
      name: 'evaluators',
      type: 'readonly Evaluator[]',
      description: 'Evaluator definitions.',
    },
  ]}
/>

### `TallyContainer.run()`

<PropertyTable
  content={[
    {
      name: 'cache',
      type: 'MemoryCache<MetricScalar>',
      description: 'Optional cache implementation.',
      isOptional: true,
    },
    {
      name: 'llmOptions',
      type: 'GenerateObjectOptions',
      description: 'Optional LLM execution options.',
      isOptional: true,
    },
    {
      name: 'metadata',
      type: 'Record<string, unknown>',
      description: 'Optional metadata to include in the report.',
      isOptional: true,
    },
  ]}
/>

## Example

```ts
import { createTally, createEvaluator, runAllTargets, defineSingleTurnEval } from 'tally';
import type { Conversation } from 'tally';
import { createAnswerRelevanceMetric } from 'tally/metrics';
import { google } from '@ai-sdk/google';

const answerRelevance = createAnswerRelevanceMetric({
  provider: google('models/gemini-2.5-flash-lite'),
});

const answerRelevanceEval = defineSingleTurnEval({
  name: 'Answer Relevance',
  metric: answerRelevance,
});

const evaluator = createEvaluator({
  name: 'QA Eval',
  evals: [answerRelevanceEval],
  context: runAllTargets(),
});

const conversation = { id: 'conv-1', steps: [] } as Conversation;

const tally = createTally({
  data: [conversation],
  evaluators: [evaluator],
});

const report = await tally.run();
```

